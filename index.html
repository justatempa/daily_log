<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>日历时间轴应用</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4F46E5',
            secondary: '#818CF8',
            neutral: '#F5F7FA',
            dark: '#1E293B'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .timeline-line {
        @apply absolute top-0 bottom-0 left-5 w-0.5 bg-secondary/30 -translate-x-1/2;
      }
      .timeline-dot {
        @apply absolute left-5 w-3 h-3 rounded-full bg-primary -translate-x-1/2;
      }
      .calendar-day {
        @apply aspect-square flex items-center justify-center rounded-full transition-all duration-200 cursor-pointer;
      }
      .calendar-day:hover:not(.calendar-day-disabled) {
        @apply bg-primary/10;
      }
      .calendar-day-selected {
        @apply bg-primary text-white;
      }
      .calendar-day-today {
        @apply border-2 border-primary/50;
      }
      .calendar-day-disabled {
        @apply text-gray-300 cursor-not-allowed;
      }
    }
  </style>
</head>
<body class="font-inter bg-neutral min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-5xl">
    <!-- 头部 -->
    <header class="mb-8 grid grid-cols-[1fr_320px] gap-4">
      <!-- 左列：标题、日期和功能按钮 -->
      <div class="flex flex-col gap-3">
        <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark">
          <i class="fa fa-calendar-check-o mr-2 text-primary"></i>日程记录
        </h1>

        <h2 id="current-date" class="text-xl font-semibold text-dark"></h2>

        <div class="flex flex-wrap gap-2">
          <button id="set-token-btn" class="flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-key"></i>
            <span>设置Token</span>
          </button>
          <button id="save-to-memos-btn" class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-cloud-upload"></i>
            <span>保存到Memos</span>
          </button>
          <button id="jianguoyun-config-btn" class="flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-folder"></i>
            <span>备份文件夹设置</span>
          </button>
          <button id="jianguoyun-backup-btn" class="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-download"></i>
            <span>备份到本地文件夹</span>
          </button>
          <button id="jianguoyun-restore-btn" class="flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-upload"></i>
            <span>从本地文件恢复</span>
          </button>
          <button id="export-btn" class="flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-clipboard"></i>
            <span>导出今日记录</span>
          </button>
        </div>
      </div>

      <!-- 右列：日历组件 -->
      <div class="bg-white rounded-lg shadow-lg p-3 row-span-2">
        <div class="flex justify-between items-center mb-2">
          <button id="prev-month" class="p-1 rounded-full hover:bg-gray-100 transition-colors">
            <i class="fa fa-chevron-left text-gray-600 text-sm"></i>
          </button>
          <h2 id="current-month" class="text-sm font-semibold text-dark"></h2>
          <button id="next-month" class="p-1 rounded-full hover:bg-gray-100 transition-colors">
            <i class="fa fa-chevron-right text-gray-600 text-sm"></i>
          </button>
        </div>

        <!-- 星期标题 -->
        <div class="grid grid-cols-7 gap-0.5 mb-1">
          <div class="text-center text-xs font-medium text-gray-500">日</div>
          <div class="text-center text-xs font-medium text-gray-500">一</div>
          <div class="text-center text-xs font-medium text-gray-500">二</div>
          <div class="text-center text-xs font-medium text-gray-500">三</div>
          <div class="text-center text-xs font-medium text-gray-500">四</div>
          <div class="text-center text-xs font-medium text-gray-500">五</div>
          <div class="text-center text-xs font-medium text-gray-500">六</div>
        </div>

        <!-- 日期网格 -->
        <div id="calendar-days" class="grid grid-cols-7 gap-0.5"></div>
      </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex gap-6 mb-6">
      <!-- 时间轴区域 -->
      <div class="bg-white rounded-xl shadow-lg p-6 flex-1">
        <!-- 时间轴 -->
        <div id="timeline" class="space-y-6 max-h-[50vh] overflow-y-auto pr-2">
          <!-- 时间轴内容将通过JS动态生成 -->
          <div class="text-center py-12 text-gray-500">
            <i class="fa fa-clock-o text-4xl mb-3 text-gray-300"></i>
            <p>今天还没有记录</p>
          </div>
        </div>
      </div>

      <!-- 快捷输入卡片 -->
      <div class="bg-white rounded-xl shadow-lg p-2 flex-shrink-0" style="width: 240px;">
        <h3 class="text-xs font-semibold text-dark mb-2 flex items-center gap-1">
          <i class="fa fa-bolt text-primary"></i>
          快捷输入
        </h3>

        <div class="space-y-1.5">
          <!-- 天气选择 -->
          <div class="flex items-center gap-1">
            <label class="text-xs font-medium text-gray-700 w-10 flex-shrink-0">天气</label>
            <div class="flex flex-wrap gap-1">
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">晴</button>
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">阴</button>
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">雨</button>
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">雪</button>
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">雾</button>
              <button type="button" class="weather-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">风</button>
            </div>
          </div>

          <!-- 心情选择 -->
          <div class="flex items-center gap-1">
            <label class="text-xs font-medium text-gray-700 w-10 flex-shrink-0">心情</label>
            <div class="flex flex-wrap gap-1">
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">开心</button>
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">平静</button>
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">焦虑</button>
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">烦躁</button>
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">难过</button>
              <button type="button" class="mood-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">兴奋</button>
            </div>
          </div>

          <!-- 工作任务选择 -->
          <div class="flex items-center gap-1">
            <label class="text-xs font-medium text-gray-700 w-10 flex-shrink-0">任务</label>
            <div class="flex flex-wrap gap-1">
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">简单</button>
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">普通</button>
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">困难</button>
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">紧急</button>
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">烦杂</button>
              <button type="button" class="task-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">重要</button>
            </div>
          </div>

          <!-- 活动选择 -->
          <div class="flex items-center gap-1">
            <label class="text-xs font-medium text-gray-700 w-10 flex-shrink-0">活动</label>
            <div class="flex flex-wrap gap-1">
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">运动</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">学习</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">阅读</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">会议</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">休息</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">娱乐</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">骑车</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">摄影</button>
              <button type="button" class="activity-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">开发</button>
            </div>
          </div>

          <!-- 维生素选择 -->
          <div class="flex items-center gap-1">
            <label class="text-xs font-medium text-gray-700 w-10 flex-shrink-0">维生素</label>
            <div class="flex flex-wrap gap-1">
              <button type="button" class="vitamin-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">是</button>
              <button type="button" class="vitamin-option px-1.5 py-0.5 text-xs rounded border border-gray-200 hover:bg-gray-50 transition-colors">否</button>
            </div>
          </div>

          <!-- 总发送按钮 -->
          <button
            id="quick-send-btn"
            class="w-full bg-primary text-white px-2 py-1 rounded-lg hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg flex items-center justify-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed text-xs mt-2"
            disabled
          >
            <i class="fa fa-paper-plane"></i>
            <span>发送</span>
          </button>
        </div>
      </div>
    </main>
    
    <!-- 输入区域 - 固定在底部 -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-10">
      <div class="container mx-auto px-4 py-4 max-w-5xl">
        <div class="flex gap-3">
          <input
            type="text"
            id="message-input"
            placeholder="输入消息..."
            class="flex-1 px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"
          >
          <button
            id="send-btn"
            class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          >
            <i class="fa fa-paper-plane"></i>
            <span>发送</span>
          </button>
        </div>
      </div>
    </div>

    <!-- 底部占位，防止内容被固定输入框遮挡 -->
    <div style="height: 80px;"></div>
  </div>

  <script>
    // 全局变量
    let currentDate = new Date();
    let selectedDate = new Date();
    let records = {};
    
    // DOM元素
    const currentMonthEl = document.getElementById('current-month');
    const currentDateEl = document.getElementById('current-date');
    const calendarDaysEl = document.getElementById('calendar-days');
    const prevMonthBtn = document.getElementById('prev-month');
    const nextMonthBtn = document.getElementById('next-month');
    const messageInput = document.getElementById('message-input');
    const sendBtn = document.getElementById('send-btn');
    const quickSendBtn = document.getElementById('quick-send-btn');
    const timelineEl = document.getElementById('timeline');
    const exportBtn = document.getElementById('export-btn');
    const setTokenBtn = document.getElementById('set-token-btn');
    const saveToMemosBtn = document.getElementById('save-to-memos-btn');
    const jianguoyunConfigBtn = document.getElementById('jianguoyun-config-btn');
    const jianguoyunBackupBtn = document.getElementById('jianguoyun-backup-btn');
    const jianguoyunRestoreBtn = document.getElementById('jianguoyun-restore-btn');
    
    // 初始化
    function init() {
      loadRecords();
      renderCalendar();
      updateCurrentDateDisplay();
      renderTimeline();
      setupEventListeners();
      setupQuickInputListeners(); // 添加快捷输入监听器
      // 初始聚焦到输入框
      messageInput.focus();
    }
    
    // 加载本地存储中的记录
    function loadRecords() {
      const storedRecords = localStorage.getItem('timelineRecords');
      if (storedRecords) {
        records = JSON.parse(storedRecords);
      }
    }
    
    // 保存记录到本地存储
    function saveRecords() {
      localStorage.setItem('timelineRecords', JSON.stringify(records));
    }
    
    // 渲染日历
    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      
      // 更新月份显示
      currentMonthEl.textContent = `${year}年${month + 1}月`;
      
      // 清空日历
      calendarDaysEl.innerHTML = '';
      
      // 获取当月第一天和最后一天
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      
      // 获取当月第一天是星期几 (0-6)
      const firstDayIndex = firstDay.getDay();
      
      // 获取上个月的最后几天
      const prevMonthLastDay = new Date(year, month, 0).getDate();
      
      // 生成日历单元格
      // 上个月的尾部日期
      for (let i = firstDayIndex; i > 0; i--) {
        const day = prevMonthLastDay - i + 1;
        const date = new Date(year, month - 1, day);
        const isToday = isSameDay(date, new Date());
        const isSelected = isSameDay(date, selectedDate);
        
        const dayEl = createCalendarDay(day, date, true, isToday, isSelected);
        calendarDaysEl.appendChild(dayEl);
      }
      
      // 当月日期
      for (let i = 1; i <= lastDay.getDate(); i++) {
        const date = new Date(year, month, i);
        const isToday = isSameDay(date, new Date());
        const isSelected = isSameDay(date, selectedDate);
        
        const dayEl = createCalendarDay(i, date, false, isToday, isSelected);
        calendarDaysEl.appendChild(dayEl);
      }
      
      // 下个月的开头日期
      const remainingDays = 42 - (firstDayIndex + lastDay.getDate());
      if (remainingDays < 7) { // 确保至少有6行
        for (let i = 1; i <= remainingDays + 7; i++) {
          const date = new Date(year, month + 1, i);
          const isToday = isSameDay(date, new Date());
          const isSelected = isSameDay(date, selectedDate);
          
          const dayEl = createCalendarDay(i, date, true, isToday, isSelected);
          calendarDaysEl.appendChild(dayEl);
        }
      }
    }
    
    // 创建日历单元格
    function createCalendarDay(day, date, isOtherMonth, isToday, isSelected) {
      const dayEl = document.createElement('div');
      dayEl.classList.add('calendar-day');
      
      if (isOtherMonth) {
        dayEl.classList.add('calendar-day-disabled', 'text-gray-400');
      } else {
        dayEl.addEventListener('click', () => {
          selectedDate = new Date(date);
          renderCalendar();
          updateCurrentDateDisplay();
          renderTimeline();
          // 切换日期后聚焦到输入框
          messageInput.focus();
        });
      }
      
      if (isSelected) {
        dayEl.classList.add('calendar-day-selected');
      }
      
      if (isToday && !isSelected) {
        dayEl.classList.add('calendar-day-today');
      }
      
      dayEl.textContent = day;
      
      // 添加当天有记录的指示
      const dateString = formatDate(date);
      if (records[dateString] && records[dateString].length > 0 && !isOtherMonth) {
        const indicator = document.createElement('div');
        indicator.classList.add('absolute', 'bottom-1', 'w-1', 'h-1', 'rounded-full', 'bg-primary');
        dayEl.classList.add('relative');
        dayEl.appendChild(indicator);
      }
      
      return dayEl;
    }
    
    // 更新当前日期显示
    function updateCurrentDateDisplay() {
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      currentDateEl.textContent = selectedDate.toLocaleDateString('zh-CN', options);
    }
    
    // 渲染时间轴
    function renderTimeline() {
      const dateString = formatDate(selectedDate);
      const dateRecords = records[dateString] || [];
      
      timelineEl.innerHTML = '';
      
      if (dateRecords.length === 0) {
        timelineEl.innerHTML = `
          <div class="text-center py-12 text-gray-500">
            <i class="fa fa-clock-o text-4xl mb-3 text-gray-300"></i>
            <p>今天还没有记录</p>
          </div>
        `;
        return;
      }
      
      dateRecords.forEach((record, index) => {
        const recordEl = createTimelineItem(record, index === dateRecords.length - 1, index);
        timelineEl.appendChild(recordEl);
      });
      
      // 滚动到底部
      timelineEl.scrollTop = timelineEl.scrollHeight;
    }
    
    // 创建时间轴项目
    function createTimelineItem(record, isLast, index) {
      const itemEl = document.createElement('div');
      itemEl.classList.add('relative', 'pl-12', 'pb-6');
      
      if (!isLast) {
        const lineEl = document.createElement('div');
        lineEl.classList.add('timeline-line');
        itemEl.appendChild(lineEl);
      }
      
      const dotEl = document.createElement('div');
      dotEl.classList.add('timeline-dot', 'top-1');
      itemEl.appendChild(dotEl);
      
      const contentEl = document.createElement('div');
      contentEl.classList.add('bg-neutral', 'rounded-lg', 'p-4', 'shadow-sm', 'group');
      
      const headerEl = document.createElement('div');
      headerEl.classList.add('flex', 'justify-between', 'items-start', 'mb-1');
      
      const timeEl = document.createElement('div');
      timeEl.classList.add('text-sm', 'text-gray-500');
      timeEl.textContent = formatDateTime(new Date(record.timestamp));
      
      const actionsEl = document.createElement('div');
      actionsEl.classList.add('opacity-0', 'group-hover:opacity-100', 'transition-opacity', 'flex', 'gap-2');
      
      const editBtn = document.createElement('button');
      editBtn.classList.add('text-blue-600', 'hover:text-blue-800', 'text-sm');
      editBtn.innerHTML = '<i class="fa fa-edit"></i>';
      editBtn.title = '编辑';
      editBtn.addEventListener('click', () => editRecord(index));
      
      const deleteBtn = document.createElement('button');
      deleteBtn.classList.add('text-red-600', 'hover:text-red-800', 'text-sm');
      deleteBtn.innerHTML = '<i class="fa fa-trash"></i>';
      deleteBtn.title = '删除';
      deleteBtn.addEventListener('click', () => deleteRecord(index));
      
      actionsEl.appendChild(editBtn);
      actionsEl.appendChild(deleteBtn);
      
      headerEl.appendChild(timeEl);
      headerEl.appendChild(actionsEl);
      
      const messageEl = document.createElement('div');
      messageEl.classList.add('text-dark', 'whitespace-pre-line');
      messageEl.textContent = record.message;
      messageEl.id = `record-message-${index}`;
      
      contentEl.appendChild(headerEl);
      contentEl.appendChild(messageEl);
      itemEl.appendChild(contentEl);
      
      return itemEl;
    }
    
    // 添加新记录
    function addRecord(message) {
      const dateString = formatDate(selectedDate);
      const timestamp = new Date().toISOString();
      
      if (!records[dateString]) {
        records[dateString] = [];
      }
      
      records[dateString].push({
        message,
        timestamp
      });
      
      saveRecords();
      renderTimeline();
      // 发送后聚焦到输入框
      messageInput.focus();
    }
    
    // 编辑记录
    function editRecord(index) {
      const dateString = formatDate(selectedDate);
      const dateRecords = records[dateString] || [];
      
      if (index >= 0 && index < dateRecords.length) {
        const record = dateRecords[index];
        
        // 创建编辑输入框
        const messageEl = document.getElementById(`record-message-${index}`);
        if (messageEl) {
          const currentMessage = messageEl.textContent;
          
          // 创建输入框
          const inputEl = document.createElement('input');
          inputEl.type = 'text';
          inputEl.value = currentMessage;
          inputEl.classList.add('w-full', 'px-3', 'py-1', 'rounded', 'border', 'border-gray-300', 'focus:outline-none', 'focus:ring-2', 'focus:ring-primary/50', 'focus:border-primary');
          
          // 保存和取消按钮
          const buttonContainer = document.createElement('div');
          buttonContainer.classList.add('flex', 'gap-2', 'mt-2');
          
          const saveBtn = document.createElement('button');
          saveBtn.textContent = '保存';
          saveBtn.classList.add('bg-primary', 'text-white', 'px-3', 'py-1', 'rounded', 'hover:bg-primary/90', 'transition-colors');
          saveBtn.addEventListener('click', () => {
            dateRecords[index].message = inputEl.value;
            saveRecords();
            renderTimeline();
          });
          
          const cancelBtn = document.createElement('button');
          cancelBtn.textContent = '取消';
          cancelBtn.classList.add('bg-gray-500', 'text-white', 'px-3', 'py-1', 'rounded', 'hover:bg-gray-600', 'transition-colors');
          cancelBtn.addEventListener('click', () => {
            renderTimeline();
          });
          
          buttonContainer.appendChild(saveBtn);
          buttonContainer.appendChild(cancelBtn);
          
          // 替换内容
          const contentEl = messageEl.parentElement;
          contentEl.innerHTML = '';
          contentEl.appendChild(inputEl);
          contentEl.appendChild(buttonContainer);
          
          // 聚焦到输入框
          inputEl.focus();
        }
      }
    }
    
    // 删除记录
    function deleteRecord(index) {
      const dateString = formatDate(selectedDate);
      const dateRecords = records[dateString] || [];
      
      if (index >= 0 && index < dateRecords.length) {
        if (confirm('确定要删除这条记录吗？')) {
          dateRecords.splice(index, 1);
          saveRecords();
          renderTimeline();
          showNotification('记录已删除', 'success');
        }
      }
    }
    
    // 导出当前日期的记录到剪贴板（只导出时间轴数据，不包含标题）
    function exportRecords() {
      const dateString = formatDate(selectedDate);
      const dateRecords = records[dateString] || [];
      
      if (dateRecords.length === 0) {
        showNotification('今天没有记录可导出', 'warning');
        return;
      }
      
      let textToCopy = '';
      
      dateRecords.forEach(record => {
        textToCopy += `${formatDateTime(new Date(record.timestamp))}: ${record.message}\n`;
      });
      
      navigator.clipboard.writeText(textToCopy)
        .then(() => {
          showNotification('记录已复制到剪贴板', 'success');
        })
        .catch(err => {
          console.error('复制失败: ', err);
          showNotification('复制失败，请重试', 'error');
        });
    }
    
    // 获取选中日期的记录内容（用于保存到Memos）
    function getTodayRecordsContent() {
      const dateString = formatDate(selectedDate);
      const dateRecords = records[dateString] || [];
      
      if (dateRecords.length === 0) {
        return '';
      }
      
      let content = '';
      dateRecords.forEach(record => {
        content += `${formatDateTime(new Date(record.timestamp))}: ${record.message}\n`;
      });
      
      return content.trim();
    }
    
    // 保存Token到本地存储
    function saveToken(token) {
      localStorage.setItem('memosToken', token);
    }
    
    // 获取Token从本地存储
    function getToken() {
      return localStorage.getItem('memosToken') || '';
    }

    // 保存坚果云配置到本地存储
    function saveJianguoyunConfig(config) {
      localStorage.setItem('jianguoyunConfig', JSON.stringify(config));
    }

    // 获取坚果云配置从本地存储
    function getJianguoyunConfig() {
      const storedConfig = localStorage.getItem('jianguoyunConfig');
      if (storedConfig) {
        return JSON.parse(storedConfig);
      }
      return {
        backupFolder: '',
        filePrefix: 'timeline-backup',
        server: 'https://dav.jianguoyun.com/dav/',
        username: '',
        password: ''
      };
    }
    
    // 显示本地文件夹设置弹窗
    function showJianguoyunDialog() {
      const config = getJianguoyunConfig();

      // 创建弹窗背景
      const overlay = document.createElement('div');
      overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';

      // 创建弹窗内容
      const dialog = document.createElement('div');
      dialog.className = 'bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl';

      dialog.innerHTML = `
        <h3 class="text-lg font-semibold mb-4 text-dark flex items-center gap-2">
          <i class="fa fa-folder text-blue-600"></i>
          备份文件夹设置
        </h3>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">默认备份文件夹</label>
          <input
            type="text"
            id="backup-folder-input"
            placeholder="C:\\Users\\用户名\\Documents\\备份"
            value="${config.backupFolder || ''}"
            class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"
          >
          <p class="text-xs text-gray-500 mt-1">设置默认的备份文件夹路径（可选）</p>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">文件名前缀</label>
          <input
            type="text"
            id="file-prefix-input"
            placeholder="timeline-backup"
            value="${config.filePrefix || 'timeline-backup'}"
            class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"
          >
          <p class="text-xs text-gray-500 mt-1">备份文件的名称前缀</p>
        </div>
        <div class="bg-blue-50 rounded-lg p-3 mb-4">
          <p class="text-sm text-blue-700">
            <i class="fa fa-info-circle mr-1"></i>
            设置后，备份文件会按时间戳命名并保存到指定文件夹
          </p>
        </div>
        <div class="flex gap-3 justify-end">
          <button id="cancel-btn" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
            取消
          </button>
          <button id="save-config-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            保存
          </button>
        </div>
      `;

      overlay.appendChild(dialog);
      document.body.appendChild(overlay);

      // 聚焦到输入框
      const backupFolderInput = dialog.querySelector('#backup-folder-input');
      backupFolderInput.focus();

      // 绑定事件
      dialog.querySelector('#cancel-btn').addEventListener('click', () => {
        document.body.removeChild(overlay);
      });

      dialog.querySelector('#save-config-btn').addEventListener('click', () => {
        const backupFolder = dialog.querySelector('#backup-folder-input').value.trim();
        const filePrefix = dialog.querySelector('#file-prefix-input').value.trim() || 'timeline-backup';

        saveJianguoyunConfig({
          backupFolder,
          filePrefix,
          server: config.server,
          username: config.username,
          password: config.password
        });

        showNotification('备份文件夹设置保存成功', 'success');
        document.body.removeChild(overlay);
      });

      // 点击背景关闭弹窗
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
        }
      });

      // 回车保存
      dialog.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          dialog.querySelector('#save-config-btn').click();
        }
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
        }
      });
    }

    // 显示设置Token弹窗
    function showTokenDialog() {
      const currentToken = getToken();

      // 创建弹窗背景
      const overlay = document.createElement('div');
      overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';

      // 创建弹窗内容
      const dialog = document.createElement('div');
      dialog.className = 'bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl';

      dialog.innerHTML = `
        <h3 class="text-lg font-semibold mb-4 text-dark">设置Memos Token</h3>
        <input 
          type="text" 
          id="token-input" 
          placeholder="请输入Token..." 
          value="${currentToken}"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all mb-4"
        >
        <div class="flex gap-3 justify-end">
          <button id="cancel-btn" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
            取消
          </button>
          <button id="save-token-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
            保存
          </button>
        </div>
      `;
      
      overlay.appendChild(dialog);
      document.body.appendChild(overlay);
      
      // 聚焦到输入框
      const tokenInput = dialog.querySelector('#token-input');
      tokenInput.focus();
      tokenInput.select();
      
      // 绑定事件
      dialog.querySelector('#cancel-btn').addEventListener('click', () => {
        document.body.removeChild(overlay);
      });
      
      dialog.querySelector('#save-token-btn').addEventListener('click', () => {
        const token = tokenInput.value.trim();
        if (token) {
          saveToken(token);
          showNotification('Token保存成功', 'success');
        } else {
          showNotification('Token不能为空', 'warning');
        }
        document.body.removeChild(overlay);
      });
      
      // 点击背景关闭弹窗
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
        }
      });
      
      // 回车保存
      tokenInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          dialog.querySelector('#save-token-btn').click();
        }
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
        }
      });
    }

    // 备份到本地文件夹
    function backupToJianguoyun() {
      try {
        // 获取当前所有记录
        const backupData = {
          records: records,
          exportDate: new Date().toISOString(),
          version: '1.0',
          description: '日历时间轴应用备份文件',
          appName: 'Timeline Calendar'
        };

        // 转换为JSON字符串
        const jsonData = JSON.stringify(backupData, null, 2);

        // 获取配置
        const config = getJianguoyunConfig();
        const filePrefix = config.filePrefix || 'timeline-backup';

        // 创建备份文件名（包含时间戳）
        const timestamp = formatDateTime(new Date()).replace(/[ :]/g, '-');
        const fileName = `${filePrefix}-${timestamp}.json`;

        // 创建Blob对象
        const blob = new Blob([jsonData], { type: 'application/json' });

        // 创建下载链接
        const downloadLink = document.createElement('a');
        downloadLink.href = URL.createObjectURL(blob);
        downloadLink.download = fileName;
        downloadLink.style.display = 'none';

        // 触发下载
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);

        // 清理URL对象
        URL.revokeObjectURL(downloadLink.href);

        // 显示保存提示
        showBackupSaveHint(fileName, config.backupFolder);

      } catch (error) {
        console.error('备份错误:', error);
        showNotification(`备份失败: ${error.message}`, 'error');
      }
    }

    // 显示保存提示
    function showBackupSaveHint(fileName, suggestedFolder) {
      // 创建弹窗背景
      const overlay = document.createElement('div');
      overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';

      // 创建弹窗内容
      const dialog = document.createElement('div');
      dialog.className = 'bg-white rounded-lg p-6 max-w-lg w-full mx-4 shadow-xl';

      const folderPath = suggestedFolder || '您的备份文件夹';

      dialog.innerHTML = `
        <h3 class="text-lg font-semibold mb-4 text-dark flex items-center gap-2">
          <i class="fa fa-check-circle text-green-500"></i>
          备份完成
        </h3>
        <div class="space-y-3 text-sm text-gray-700 mb-6">
          <p><strong>文件名:</strong> <span class="text-blue-600">${fileName}</span></p>
          <p><strong>建议保存位置:</strong> <span class="text-blue-600">${folderPath}</span></p>
          <p class="text-green-600"><i class="fa fa-lightbulb-o mr-1"></i>请将此文件保存到您的备份文件夹中</p>
        </div>
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4">
          <p class="text-sm text-yellow-700">
            <strong>提示:</strong> 建议定期备份数据到安全的存储位置
          </p>
        </div>
        <div class="flex gap-3 justify-end">
          <button id="open-backup-folder-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            <i class="fa fa-folder-open mr-1"></i>
            打开文件夹
          </button>
          <button id="close-hint-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
            我知道了
          </button>
        </div>
      `;

      overlay.appendChild(dialog);
      document.body.appendChild(overlay);

      // 绑定事件
      dialog.querySelector('#close-hint-btn').addEventListener('click', () => {
        document.body.removeChild(overlay);
      });

      dialog.querySelector('#open-backup-folder-btn').addEventListener('click', () => {
        // 尝试打开文件夹（在支持的浏览器中）
        if (suggestedFolder) {
          try {
            window.open(`file:///${suggestedFolder.replace(/\\/g, '/')}`);
          } catch (error) {
            showNotification('请手动打开备份文件夹', 'info');
          }
        }
      });

      // 点击背景关闭弹窗
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
        }
      });

      // ESC关闭弹窗
      document.addEventListener('keydown', function escHandler(e) {
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
          document.removeEventListener('keydown', escHandler);
        }
      });
    }

    // 从本地文件恢复
    function restoreFromJianguoyun() {
      // 创建隐藏的文件选择器
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.accept = '.json';
      fileInput.style.display = 'none';

      // 监听文件选择
      fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        // 验证文件类型
        if (!file.name.endsWith('.json')) {
          showNotification('请选择JSON格式的备份文件', 'warning');
          return;
        }

        // 读取文件内容
        const reader = new FileReader();
        reader.onload = function(e) {
          try {
            const backupData = JSON.parse(e.target.result);

            // 验证备份数据
            if (!backupData.records || typeof backupData.records !== 'object') {
              showNotification('备份文件格式无效', 'error');
              return;
            }

            // 显示文件详情确认
            showRestoreConfirm(backupData, file.name, () => {
              // 恢复数据
              records = backupData.records;
              saveRecords();

              // 刷新界面
              renderTimeline();
              renderCalendar();

              showNotification(`从 ${file.name} 恢复数据成功`, 'success');
            });
          } catch (error) {
            console.error('解析备份文件失败:', error);
            showNotification('备份文件解析失败，请检查文件格式', 'error');
          }
        };

        reader.readAsText(file);
      });

      // 触发文件选择对话框
      document.body.appendChild(fileInput);
      fileInput.click();
      document.body.removeChild(fileInput);
    }

    // 显示恢复确认对话框
    function showRestoreConfirm(backupData, fileName, onConfirm) {
      const exportDate = backupData.exportDate ? new Date(backupData.exportDate).toLocaleString('zh-CN') : '未知';
      const recordCount = Object.keys(backupData.records || {}).length;

      // 创建弹窗背景
      const overlay = document.createElement('div');
      overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';

      // 创建弹窗内容
      const dialog = document.createElement('div');
      dialog.className = 'bg-white rounded-lg p-6 max-w-lg w-full mx-4 shadow-xl';

      dialog.innerHTML = `
        <h3 class="text-lg font-semibold mb-4 text-dark flex items-center gap-2">
          <i class="fa fa-question-circle text-orange-500"></i>
          确认恢复数据
        </h3>
        <div class="space-y-3 text-sm text-gray-700 mb-6">
          <p><strong>备份文件:</strong> <span class="text-blue-600">${fileName}</span></p>
          <p><strong>备份时间:</strong> <span class="text-blue-600">${exportDate}</span></p>
          <p><strong>数据天数:</strong> <span class="text-blue-600">${recordCount} 天</span></p>
          <div class="bg-red-50 border border-red-200 rounded-lg p-3">
            <p class="text-red-700">
              <i class="fa fa-exclamation-triangle mr-1"></i>
              <strong>警告:</strong> 此操作将覆盖当前所有数据，请确认是否继续？
            </p>
          </div>
        </div>
        <div class="flex gap-3 justify-end">
          <button id="cancel-restore-btn" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
            取消
          </button>
          <button id="confirm-restore-btn" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
            <i class="fa fa-exchange mr-1"></i>
            确认恢复
          </button>
        </div>
      `;

      overlay.appendChild(dialog);
      document.body.appendChild(overlay);

      // 绑定事件
      dialog.querySelector('#cancel-restore-btn').addEventListener('click', () => {
        document.body.removeChild(overlay);
      });

      dialog.querySelector('#confirm-restore-btn').addEventListener('click', () => {
        onConfirm();
        document.body.removeChild(overlay);
      });

      // 点击背景关闭弹窗
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
        }
      });

      // ESC关闭弹窗
      document.addEventListener('keydown', function escHandler(e) {
        if (e.key === 'Escape') {
          document.body.removeChild(overlay);
          document.removeEventListener('keydown', escHandler);
        }
      });
    }

    // 保存到Memos
    async function saveToMemos() {
      const token = getToken();
      if (!token) {
        showNotification('请先设置Token', 'warning');
        return;
      }
      
      const content = getTodayRecordsContent();
      if (!content) {
        showNotification('今天没有记录可保存', 'warning');
        return;
      }
      
      try {
        const response = await fetch('https://memos.911250.xyz/api/v1/memos', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify({
            state: 'NORMAL',
            content: content,
            visibility: 'PUBLIC',
            pinned: false
          })
        });
        
        if (response.ok) {
          showNotification('保存到Memos成功', 'success');
        } else {
          const errorData = await response.text();
          console.error('保存失败:', errorData);
          showNotification('保存失败，请检查Token是否正确', 'error');
        }
      } catch (error) {
        console.error('网络错误:', error);
        showNotification('网络错误，请重试', 'error');
      }
    }
    
    // 显示通知
    function showNotification(message, type = 'info') {
      // 创建通知元素
      const notification = document.createElement('div');
      
      // 设置样式
      let bgColor, textColor, icon;
      switch(type) {
        case 'success':
          bgColor = 'bg-green-500';
          textColor = 'text-white';
          icon = 'fa-check-circle';
          break;
        case 'error':
          bgColor = 'bg-red-500';
          textColor = 'text-white';
          icon = 'fa-exclamation-circle';
          break;
        case 'warning':
          bgColor = 'bg-yellow-500';
          textColor = 'text-white';
          icon = 'fa-exclamation-triangle';
          break;
        default:
          bgColor = 'bg-blue-500';
          textColor = 'text-white';
          icon = 'fa-info-circle';
      }
      
      notification.className = `${bgColor} ${textColor} px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 fixed bottom-4 right-4 z-50 transform transition-all duration-300 translate-y-20 opacity-0`;
      notification.innerHTML = `<i class="fa ${icon}"></i> <span>${message}</span>`;
      
      // 添加到页面
      document.body.appendChild(notification);
      
      // 显示通知
      setTimeout(() => {
        notification.classList.remove('translate-y-20', 'opacity-0');
      }, 10);
      
      // 3秒后隐藏通知
      setTimeout(() => {
        notification.classList.add('translate-y-20', 'opacity-0');
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }
    
    // 格式化日期 (yyyy-MM-dd)
    function formatDate(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      return `${year}-${month}-${day}`;
    }
    
    // 格式化日期时间 (yyyy-MM-dd HH:mm:ss)
    function formatDateTime(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      const hours = String(date.getHours()).padStart(2, '0');
      const minutes = String(date.getMinutes()).padStart(2, '0');
      const seconds = String(date.getSeconds()).padStart(2, '0');
      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
    }
    
    // 判断两个日期是否是同一天
    function isSameDay(date1, date2) {
      return date1.getFullYear() === date2.getFullYear() &&
             date1.getMonth() === date2.getMonth() &&
             date1.getDate() === date2.getDate();
    }
    
    // 设置事件监听器
    function setupEventListeners() {
      // 上个月按钮
      prevMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
      });
      
      // 下个月按钮
      nextMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
      });
      
      // 输入框变化
      messageInput.addEventListener('input', () => {
        sendBtn.disabled = messageInput.value.trim().length === 0;
      });
      
      // 发送按钮点击
      sendBtn.addEventListener('click', () => {
        const message = messageInput.value.trim();
        if (message) {
          addRecord(message);
          messageInput.value = '';
          sendBtn.disabled = true;
        }
      });
      
      // 输入框回车发送
      messageInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendBtn.click();
        }
      });
      
      // 导出按钮点击
      exportBtn.addEventListener('click', exportRecords);
      
      // 设置Token按钮点击
      setTokenBtn.addEventListener('click', showTokenDialog);

      // 坚果云配置按钮点击
      jianguoyunConfigBtn.addEventListener('click', showJianguoyunDialog);

      // 备份到坚果云按钮点击
      jianguoyunBackupBtn.addEventListener('click', backupToJianguoyun);

      // 从坚果云恢复按钮点击
      jianguoyunRestoreBtn.addEventListener('click', restoreFromJianguoyun);
      
      // 保存到Memos按钮点击
      saveToMemosBtn.addEventListener('click', saveToMemos);
    }
    
    // 设置快捷输入监听器
    function setupQuickInputListeners() {
      // 天气选项
      const weatherOptions = document.querySelectorAll('.weather-option');
      weatherOptions.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('bg-primary/20');
          option.classList.toggle('border-primary');
          checkQuickSendBtnStatus();
        });
      });

      // 心情选项
      const moodOptions = document.querySelectorAll('.mood-option');
      moodOptions.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('bg-primary/20');
          option.classList.toggle('border-primary');
          checkQuickSendBtnStatus();
        });
      });

      // 工作任务选项
      const taskOptions = document.querySelectorAll('.task-option');
      taskOptions.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('bg-primary/20');
          option.classList.toggle('border-primary');
          checkQuickSendBtnStatus();
        });
      });

      // 活动选项
      const activityOptions = document.querySelectorAll('.activity-option');
      activityOptions.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('bg-primary/20');
          option.classList.toggle('border-primary');
          checkQuickSendBtnStatus();
        });
      });

      // 维生素选项
      const vitaminOptions = document.querySelectorAll('.vitamin-option');
      vitaminOptions.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('bg-primary/20');
          option.classList.toggle('border-primary');
          checkQuickSendBtnStatus();
        });
      });

      // 快捷发送按钮
      quickSendBtn.addEventListener('click', sendQuickInput);
    }
    
    // 检查快捷发送按钮状态
    function checkQuickSendBtnStatus() {
      const hasSelected = document.querySelector('.weather-option.bg-primary\\/20, .mood-option.bg-primary\\/20, .task-option.bg-primary\\/20, .activity-option.bg-primary\\/20, .vitamin-option.bg-primary\\/20');
      quickSendBtn.disabled = !hasSelected;
    }

    // 发送快捷输入
    function sendQuickInput() {
      const selectedWeather = Array.from(document.querySelectorAll('.weather-option.bg-primary\\/20')).map(el => el.textContent);
      const selectedMood = Array.from(document.querySelectorAll('.mood-option.bg-primary\\/20')).map(el => el.textContent);
      const selectedTask = Array.from(document.querySelectorAll('.task-option.bg-primary\\/20')).map(el => el.textContent);
      const selectedActivity = Array.from(document.querySelectorAll('.activity-option.bg-primary\\/20')).map(el => el.textContent);
      const selectedVitamin = Array.from(document.querySelectorAll('.vitamin-option.bg-primary\\/20')).map(el => el.textContent);

      let message = '';
      if (selectedWeather.length > 0) message += `天气##${selectedWeather.join(', ')}`;
      if (selectedMood.length > 0) message += (message ? '\n' : '') + `心情##${selectedMood.join(', ')}`;
      if (selectedTask.length > 0) message += (message ? '\n' : '') + `任务##${selectedTask.join(', ')}`;
      if (selectedActivity.length > 0) message += (message ? '\n' : '') + `活动##${selectedActivity.join(', ')}`;
      if (selectedVitamin.length > 0) message += (message ? '\n' : '') + `维生素##${selectedVitamin.join(', ')}`;

      if (message) {
        addRecord(message);
        resetQuickInputSelections();
      }
    }

    // 重置快捷输入选择
    function resetQuickInputSelections() {
      document.querySelectorAll('.weather-option, .mood-option, .task-option, .activity-option, .vitamin-option').forEach(option => {
        option.classList.remove('bg-primary\\/20', 'border-primary');
      });
      quickSendBtn.disabled = true;
    }
    
    // 初始化应用
    init();
  </script>
</body>
</html>
    